{% extends "base.html" %}
{% block title %}통계 정보 - 캠퍼스 분실물 플랫폼{% endblock %}

{% block content %}
<div class="page-title">
  <h2>📊 통계 정보</h2>
  <p>분실 및 습득 현황을 한눈에 확인하세요.</p>
</div>

<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem;">
  <div class="card" style="text-align:center;background:linear-gradient(135deg,#ff9a9e 0%,#fad0c4 100%);color:#721c24;border:none;">
    <div style="font-size:3rem;margin-bottom:.5rem;">🔍</div>
    <h3 style="font-size:2rem;margin-bottom:.5rem;">{{ total_lost }}</h3>
    <p style="font-size:1.1rem;font-weight:500;">분실된 물품</p>
  </div>

  <div class="card" style="text-align:center;background:linear-gradient(135deg,#84fab0 0%,#8fd3f4 100%);color:#155724;border:none;">
    <div style="font-size:3rem;margin-bottom:.5rem;">📦</div>
    <h3 style="font-size:2rem;margin-bottom:.5rem;">{{ total_found }}</h3>
    <p style="font-size:1.1rem;font-weight:500;">습득된 물품</p>
  </div>

  <div class="card" style="text-align:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;">
    <div style="font-size:3rem;margin-bottom:.5rem;">📈</div>
    <h3 style="font-size:2rem;margin-bottom:.5rem;">{{ total_lost + total_found }}</h3>
    <p style="font-size:1.1rem;font-weight:500;">총 등록 수</p>
  </div>

  <div class="card" style="text-align:center;background:linear-gradient(135deg,#ffecd2 0%,#fcb69f 100%);color:#8b4513;border:none;">
    <div style="font-size:3rem;margin-bottom:.5rem;">🎯</div>
    {% set total = total_lost + total_found %}
    {% set rate = 0 if total == 0 else (total_found / total * 100) %}
    <h3 style="font-size:2rem;margin-bottom:.5rem;">{{ '%.1f'|format(rate) }}%</h3>
    <p style="font-size:1.1rem;font-weight:500;">회수율</p>
  </div>
</div>

<div class="card">
  <h3 style="text-align:center;margin-bottom:1rem;">📂 분류별 통계</h3>
  {% for category in lost_stats.keys() %}
    {% set lost = lost_stats[category] %}
    {% set found = found_stats[category] %}
    {% set sum = lost + found %}
    {% if sum > 0 %}
      <div style="background:#f7f8fc;padding:1rem;border-radius:10px;margin-bottom:1rem;">
        <strong style="font-size:1.2rem;">{{ category }}</strong> — 총 {{ sum }}건
        <div style="margin-top:10px;">
          🔍 분실: {{ lost }} &nbsp;&nbsp;|&nbsp;&nbsp; 📦 습득: {{ found }}
        </div>
      </div>
    {% endif %}
  {% endfor %}
</div>

{% if location_stats %}
<div class="card">
  <h3 style="text-align:center;margin-bottom:1rem;">📍 장소별 통계</h3>
  {% for location, stats in location_stats.items() %}
    {% set sum = stats.lost + stats.found %}
    <div style="background:#f8f9fa;padding:1rem;border-radius:10px;margin-bottom:1rem;">
      <strong>{{ location }}</strong> — 총 {{ sum }}건
      <div style="margin-top:10px;">
        🔍 분실: {{ stats.lost }} &nbsp;&nbsp;|&nbsp;&nbsp; 📦 습득: {{ stats.found }}
      </div>
    </div>
  {% endfor %}
</div>
{% endif %}

<div style="text-align:center;padding:2rem 0;">
  <a href="/register" class="btn">📝 분실 / 습득 정보 등록</a>
  <a href="/search" class="btn btn-secondary">🔍 분실물 검색</a>
</div>
{% endblock %}
