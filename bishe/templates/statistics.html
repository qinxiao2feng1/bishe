{% extends "base.html" %}
{% block title %}ν†µκ³„ μ •λ³΄ - μΊ νΌμ¤ λ¶„μ‹¤λ¬Ό ν”λ«νΌ{% endblock %}

{% block content %}
<div class="page-title">
  <h2>π“ ν†µκ³„ μ •λ³΄</h2>
  <p>λ¶„μ‹¤ λ° μµλ“ ν„ν™©μ„ ν•λμ— ν™•μΈν•μ„Έμ”.</p>
</div>

<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem;">
  <div class="card" style="text-align:center;background:linear-gradient(135deg,#ff9a9e 0%,#fad0c4 100%);color:#721c24;border:none;">
    <div style="font-size:3rem;margin-bottom:.5rem;">π”</div>
    <h3 style="font-size:2rem;margin-bottom:.5rem;">{{ total_lost }}</h3>
    <p style="font-size:1.1rem;font-weight:500;">λ¶„μ‹¤λ λ¬Όν’</p>
  </div>

  <div class="card" style="text-align:center;background:linear-gradient(135deg,#84fab0 0%,#8fd3f4 100%);color:#155724;border:none;">
    <div style="font-size:3rem;margin-bottom:.5rem;">π“¦</div>
    <h3 style="font-size:2rem;margin-bottom:.5rem;">{{ total_found }}</h3>
    <p style="font-size:1.1rem;font-weight:500;">μµλ“λ λ¬Όν’</p>
  </div>

  <div class="card" style="text-align:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;">
    <div style="font-size:3rem;margin-bottom:.5rem;">π“</div>
    <h3 style="font-size:2rem;margin-bottom:.5rem;">{{ total_lost + total_found }}</h3>
    <p style="font-size:1.1rem;font-weight:500;">μ΄ λ“±λ΅ μ</p>
  </div>

  <div class="card" style="text-align:center;background:linear-gradient(135deg,#ffecd2 0%,#fcb69f 100%);color:#8b4513;border:none;">
    <div style="font-size:3rem;margin-bottom:.5rem;">π―</div>
    {% set total = total_lost + total_found %}
    {% set rate = 0 if total == 0 else (total_found / total * 100) %}
    <h3 style="font-size:2rem;margin-bottom:.5rem;">{{ '%.1f'|format(rate) }}%</h3>
    <p style="font-size:1.1rem;font-weight:500;">νμμ¨</p>
  </div>
</div>

<div class="card">
  <h3 style="text-align:center;margin-bottom:1rem;">π“‚ λ¶„λ¥λ³„ ν†µκ³„</h3>
  {% for category in lost_stats.keys() %}
    {% set lost = lost_stats[category] %}
    {% set found = found_stats[category] %}
    {% set sum = lost + found %}
    {% if sum > 0 %}
      <div style="background:#f7f8fc;padding:1rem;border-radius:10px;margin-bottom:1rem;">
        <strong style="font-size:1.2rem;">{{ category }}</strong> β€” μ΄ {{ sum }}κ±΄
        <div style="margin-top:10px;">
          π” λ¶„μ‹¤: {{ lost }} &nbsp;&nbsp;|&nbsp;&nbsp; π“¦ μµλ“: {{ found }}
        </div>
      </div>
    {% endif %}
  {% endfor %}
</div>

{% if location_stats %}
<div class="card">
  <h3 style="text-align:center;margin-bottom:1rem;">π“ μ¥μ†λ³„ ν†µκ³„</h3>
  {% for location, stats in location_stats.items() %}
    {% set sum = stats.lost + stats.found %}
    <div style="background:#f8f9fa;padding:1rem;border-radius:10px;margin-bottom:1rem;">
      <strong>{{ location }}</strong> β€” μ΄ {{ sum }}κ±΄
      <div style="margin-top:10px;">
        π” λ¶„μ‹¤: {{ stats.lost }} &nbsp;&nbsp;|&nbsp;&nbsp; π“¦ μµλ“: {{ stats.found }}
      </div>
    </div>
  {% endfor %}
</div>
{% endif %}

<div style="text-align:center;padding:2rem 0;">
  <a href="/register" class="btn">π“ λ¶„μ‹¤ / μµλ“ μ •λ³΄ λ“±λ΅</a>
  <a href="/search" class="btn btn-secondary">π” λ¶„μ‹¤λ¬Ό κ²€μƒ‰</a>
</div>
{% endblock %}
